!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[86],{72620:function(r,o,i){"use strict";i.d(o,{Y:function(){return s}});var n=i(37716),a=i(76458),s=function(){var r=function(){function r(t){e(this,r),this.snackbar=t}return t(r,[{key:"success",value:function(e){return this.snackbar.open(e,void 0,{duration:3e3,panelClass:["snackbar-success"]})}},{key:"error",value:function(e){return this.snackbar.open(e,void 0,{duration:3e3,panelClass:["snackbar-error"]})}}]),r}();return r.\u0275fac=function(e){return new(e||r)(n.LFG(a.ux))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},90086:function(r,o,i){"use strict";i.r(o),i.d(o,{ProgramFormModule:function(){return F}});var n=i(38583),a=i(95987),s=i(3679),l=i(37716),c=i(11766),u=i(72620),d=i(87060),m=i(65939);function g(e,r){1&e&&(l.TgZ(0,"div"),l._uU(1,"Required"),l.qZA())}function p(e,r){if(1&e&&(l.TgZ(0,"div",25),l.YNc(1,g,2,0,"div",26),l.qZA()),2&e){var t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.f.programName.errors.required)}}function f(e,r){1&e&&(l.TgZ(0,"div"),l._uU(1,"Required"),l.qZA())}function v(e,r){if(1&e&&(l.TgZ(0,"div",25),l.YNc(1,f,2,0,"div",26),l.qZA()),2&e){var t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.f.programType.errors.required)}}function Z(e,r){1&e&&(l.TgZ(0,"div"),l._uU(1,"Required"),l.qZA())}function h(e,r){if(1&e&&(l.TgZ(0,"div",25),l.YNc(1,Z,2,0,"div",26),l.qZA()),2&e){var t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",t.f.days.errors.required)}}var b=function(e){return{"is-invalid":e}};function y(e,r){if(1&e&&(l.TgZ(0,"div",6),l.TgZ(1,"label",7),l._uU(2,"Total no.of days"),l.qZA(),l.TgZ(3,"div",8),l.TgZ(4,"div",9),l.TgZ(5,"div",10),l._UZ(6,"input",27),l.YNc(7,h,2,1,"div",12),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){var t=l.oxw();l.xp6(6),l.Q6J("ngClass",l.VKq(2,b,t.submitted&&t.f.days.errors)),l.xp6(1),l.Q6J("ngIf",t.submitted&&t.f.days.errors)}}function q(e,r){1&e&&(l.TgZ(0,"div"),l._uU(1,"Required"),l.qZA())}function T(e,r){if(1&e&&(l.TgZ(0,"div",25),l.YNc(1,q,2,0,"div",26),l.qZA()),2&e){var t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",t.f.months.errors.required)}}function k(e,r){if(1&e&&(l.TgZ(0,"div",6),l.TgZ(1,"label",7),l._uU(2,"Total no.of months"),l.qZA(),l.TgZ(3,"div",8),l.TgZ(4,"div",9),l.TgZ(5,"div",10),l._UZ(6,"input",28),l.YNc(7,T,2,1,"div",12),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){var t=l.oxw();l.xp6(6),l.Q6J("ngClass",l.VKq(2,b,t.submitted&&t.f.months.errors)),l.xp6(1),l.Q6J("ngIf",t.submitted&&t.f.months.errors)}}function A(e,r){1&e&&(l.TgZ(0,"div"),l._uU(1,"Required"),l.qZA())}function x(e,r){if(1&e&&(l.TgZ(0,"div",25),l.YNc(1,A,2,0,"div",26),l.qZA()),2&e){var t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.f.checkupInterval.errors.required)}}function w(e,r){if(1&e){var t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",45),l.TgZ(2,"div",46),l.TgZ(3,"h4",47),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"div",48),l._UZ(6,"input",49),l.qZA(),l.TgZ(7,"div",50),l.TgZ(8,"button",51),l.NdJ("click",function(){var e=l.CHM(t).index,r=l.oxw().index;return l.oxw(2).removeEmployeeSkill(r,e)}),l.TgZ(9,"span",41),l._uU(10," remove_circle "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var o=r.index;l.xp6(1),l.Q6J("formGroupName",o),l.xp6(3),l.hij("Checkup ",o+1," :")}}function N(e,r){if(1&e){var t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",36),l.TgZ(2,"div",9),l.TgZ(3,"div",37),l.TgZ(4,"h3",38),l._uU(5),l.qZA(),l._UZ(6,"input",39),l.TgZ(7,"button",40),l.NdJ("click",function(){var e=l.CHM(t).index;return l.oxw(2).removeEmployee(e)}),l.TgZ(8,"span",41),l._uU(9," remove_circle "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",42),l.YNc(11,w,11,2,"div",33),l.qZA(),l.TgZ(12,"button",43),l.NdJ("click",function(){var e=l.CHM(t).index;return l.oxw(2).addEmployeeSkill(e)}),l._uU(13," Add Checkup "),l.TgZ(14,"span",44),l._uU(15," add_circle "),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var o=r.index,i=l.oxw(2);l.xp6(1),l.Q6J("formGroupName",o),l.xp6(4),l.hij("Visit-",o+1," :"),l.xp6(6),l.Q6J("ngForOf",i.employeeSkills(o).controls)}}function C(e,r){if(1&e){var t=l.EpF();l.TgZ(0,"div",21),l.TgZ(1,"button",22),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).backClicked()}),l._uU(2,"Back"),l.qZA(),l.TgZ(3,"button",23),l._uU(4,"Save"),l.qZA(),l.qZA()}}function _(e,r){if(1&e){var t=l.EpF();l.TgZ(0,"mat-tab",29),l.TgZ(1,"div",1),l.TgZ(2,"form",30),l.NdJ("ngSubmit",function(){return l.CHM(t),l.oxw().onSubmit2()}),l.TgZ(3,"div",31),l.TgZ(4,"div",9),l.TgZ(5,"div",32),l.YNc(6,N,16,3,"div",33),l.qZA(),l.qZA(),l.TgZ(7,"button",34),l.NdJ("click",function(){return l.CHM(t),l.oxw().addEmployee()}),l._uU(8,"Add Visit"),l.qZA(),l.qZA(),l.YNc(9,C,5,0,"div",35),l.qZA(),l.qZA(),l.qZA()}if(2&e){var o=l.oxw();l.xp6(2),l.Q6J("formGroup",o.empForm),l.xp6(4),l.Q6J("ngForOf",o.employees().controls),l.xp6(3),l.Q6J("ngIf",o.edit)}}var I,J=function(){var r=function(){function r(t,o,i,n,a,l){e(this,r),this._location=t,this.fb=o,this.programService=i,this.toasterService=n,this.router=a,this.dataservice=l,this.programForm=new s.cw({programName:new s.NI("",s.kI.required),programType:new s.NI("",s.kI.required),days:new s.NI(""),months:new s.NI(""),checkupInterval:new s.NI("",s.kI.required),createdBy:new s.NI("")}),this.submitted=!1,this.showDays=!0,this.showMonths=!0,this.edit=!1,this.selectedTab=0}return t(r,[{key:"ngOnInit",value:function(){this.edit=this.router.url.indexOf("/edit/program-form")>-1,this.empForm=this.fb.group({employees:this.fb.array([])}),this.edit&&this.editPatchValue()}},{key:"editPatchValue",value:function(){var e=this,r=this.dataservice.getEdittingUser();this.edittingObject=r,this.programForm.patchValue(r);var t=null==r?void 0:r.visitDetails;t&&t.forEach(function(r,t){e.fb.group({visit:r.visit,skills:r.skills});var o=e.empForm.get("employees"),i=e.fb.group({visit:r.visit,skills:e.fb.array([])});o.push(i),r.skills.forEach(function(r,o){var i=e.employees().at(t).get("skills"),n=e.fb.group({skill:r.skill,status:!1});i.push(n)})})}},{key:"backClicked",value:function(){this._location.back()}},{key:"employees",value:function(){return this.empForm.get("employees")}},{key:"newEmployee",value:function(){return this.fb.group({visit:"",skills:this.fb.array([])})}},{key:"addEmployee",value:function(){this.employees().push(this.newEmployee())}},{key:"removeEmployee",value:function(e){this.employees().removeAt(e)}},{key:"employeeSkills",value:function(e){return this.employees().at(e).get("skills")}},{key:"newSkill",value:function(){return this.fb.group({skill:"",status:!1})}},{key:"addEmployeeSkill",value:function(e){this.employeeSkills(e).push(this.newSkill())}},{key:"removeEmployeeSkill",value:function(e,r){this.employeeSkills(e).removeAt(r)}},{key:"onProgramTypeChange",value:function(){var e,r,t,o,i,n,a,l,c,u=null===(e=this.programForm.get("programType"))||void 0===e?void 0:e.value;"days"==u&&(this.showDays=!0,this.showMonths=!1,null===(r=this.programForm.get("days"))||void 0===r||r.setValidators([s.kI.required]),null===(t=this.programForm.get("days"))||void 0===t||t.updateValueAndValidity(),null===(o=this.programForm.get("months"))||void 0===o||o.clearValidators(),null===(i=this.programForm.get("months"))||void 0===i||i.updateValueAndValidity()),"months"==u&&(this.showMonths=!0,this.showDays=!1,null===(n=this.programForm.get("days"))||void 0===n||n.clearValidators(),null===(a=this.programForm.get("days"))||void 0===a||a.updateValueAndValidity(),null===(l=this.programForm.get("months"))||void 0===l||l.setValidators([s.kI.required]),null===(c=this.programForm.get("months"))||void 0===c||c.updateValueAndValidity())}},{key:"onSubmit",value:function(){var e,r=this;if(this.submitted=!0,!this.programForm.valid)return!1;if(this.programForm.valid){if(!this.edit){var t=JSON.parse(localStorage.getItem("userObj")||"");null===(e=this.programForm.get("createdBy"))||void 0===e||e.setValue(t._id),this.programService.createProgram(this.programForm.value).subscribe(function(e){r.submitted=!1,r.programForm.reset(),r.edit=!0,r.edittingObject=e.object,r.dataservice.setEdittingUser(e.object),r.programForm.patchValue(e.object),r.editPatchValue(),r.selectedTab=1,r.toasterService.success("Program created successfully")},function(e){r.toasterService.error("Failed to create program!try again later")})}this.edit&&this.programService.updateProgram(this.programForm.value,this.edittingObject._id).subscribe(function(e){r.submitted=!1,r.programForm.reset(),r.router.navigateByUrl("/create-program"),r.toasterService.success("Program updated successfully")},function(e){r.toasterService.error("Failed to create program!try again later")}),window.location.href="/dashboard"}}},{key:"onSubmit2",value:function(){var e=this;this.programService.addvisitDetails(this.empForm.value,this.edittingObject._id).subscribe(function(r){e.toasterService.success("details updated successfully"),e.router.navigateByUrl("/create-program")},function(r){e.toasterService.error("Failed to update")})}},{key:"f",get:function(){return this.programForm.controls}}]),r}();return r.\u0275fac=function(e){return new(e||r)(l.Y36(n.Ye),l.Y36(s.qu),l.Y36(c.M),l.Y36(u.Y),l.Y36(a.F0),l.Y36(d.z))},r.\u0275cmp=l.Xpm({type:r,selectors:[["app-program-form"]],decls:43,vars:20,consts:[[1,"card","rounded"],[1,"card-body","border-top","px-5","py-1"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],["label","Program"],[1,"form",3,"formGroup","ngSubmit"],[1,"card-body","border-top","p-4"],[1,"row","mb-3"],[1,"col-lg-4","col-form-label","required","fw-bold","fs-6"],[1,"col-lg-8"],[1,"row"],[1,"col-lg-6","fv-row"],["type","text","placeholder","Program name","formControlName","programName",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"col-lg-8","fv-row","d-flex","align-items-center"],[1,"form-check"],["type","radio","formControlName","programType","id","exampleRadios1","value","days",1,"form-check-input",3,"ngClass","change"],["for","exampleRadios1",1,"form-check-label"],["type","radio","formControlName","programType","id","exampleRadios2","value","months",1,"form-check-input",3,"ngClass","change"],["for","exampleRadios2",1,"form-check-label"],["class","row mb-3",4,"ngIf"],["type","text","placeholder","Interval","formControlName","checkupInterval",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[1,"d-flex","justify-content-end","pb-5","px-9"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success"],["label","Details",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],["type","text","placeholder","Days","formControlName","days",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["type","text","placeholder","Months","formControlName","months",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["label","Details"],[3,"formGroup","ngSubmit"],["formArrayName","employees"],[1,"col-7"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-success","my-3",3,"click"],["class","d-flex justify-content-end pb-5 px-9",4,"ngIf"],[3,"formGroupName"],[1,"col-md-12","d-flex","align-items-center"],[1,"mb-0","w-50"],["type","text","formControlName","visit",1,"form-control"],[1,"btn","btn-sm","btn-transparent","ml-2",3,"click"],[1,"material-icons","remove_btn"],["formArrayName","skills"],["type","button",1,"btn","btn-sm","btn-transparent","d-flex","align-items-center",3,"click"],[1,"material-icons","add_btn"],[1,"row","mb-1","mt-3","ml-3","d-flex","align-items-center",3,"formGroupName"],[1,"col-md-4","d-flex","justify-content-md-end"],[1,"mb-0"],[1,"col-md-6"],["type","text","formControlName","skill",1,"form-control"],[1,"col-md-2"],[1,"btn","btn-sm","btn-transparent",3,"click"]],template:function(e,r){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"mat-tab-group",2),l.NdJ("selectedIndexChange",function(e){return r.selectedTab=e}),l.TgZ(3,"mat-tab",3),l.TgZ(4,"form",4),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(5,"div",5),l.TgZ(6,"div",6),l.TgZ(7,"label",7),l._uU(8,"Program Name"),l.qZA(),l.TgZ(9,"div",8),l.TgZ(10,"div",9),l.TgZ(11,"div",10),l._UZ(12,"input",11),l.YNc(13,p,2,1,"div",12),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",6),l.TgZ(15,"label",7),l._uU(16,"Type"),l.qZA(),l.TgZ(17,"div",13),l.TgZ(18,"div",14),l.TgZ(19,"input",15),l.NdJ("change",function(){return r.onProgramTypeChange()}),l.qZA(),l.TgZ(20,"label",16),l._uU(21," Day "),l.qZA(),l.qZA(),l.TgZ(22,"div",14),l.TgZ(23,"input",17),l.NdJ("change",function(){return r.onProgramTypeChange()}),l.qZA(),l.TgZ(24,"label",18),l._uU(25," Month "),l.qZA(),l.YNc(26,v,2,1,"div",12),l.qZA(),l.qZA(),l.qZA(),l.YNc(27,y,8,4,"div",19),l.YNc(28,k,8,4,"div",19),l.TgZ(29,"div",6),l.TgZ(30,"label",7),l._uU(31,"Checkup interval"),l.qZA(),l.TgZ(32,"div",8),l.TgZ(33,"div",9),l.TgZ(34,"div",10),l._UZ(35,"input",20),l.YNc(36,x,2,1,"div",12),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(37,"div",21),l.TgZ(38,"button",22),l.NdJ("click",function(){return r.backClicked()}),l._uU(39,"Back"),l.qZA(),l.TgZ(40,"button",23),l._uU(41,"Save"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(42,_,10,3,"mat-tab",24),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(2),l.Q6J("selectedIndex",r.selectedTab),l.xp6(2),l.Q6J("formGroup",r.programForm),l.xp6(8),l.Q6J("ngClass",l.VKq(12,b,r.submitted&&r.f.programName.errors)),l.xp6(1),l.Q6J("ngIf",r.submitted&&r.f.programName.errors),l.xp6(6),l.Q6J("ngClass",l.VKq(14,b,r.submitted&&r.f.programType.errors)),l.xp6(4),l.Q6J("ngClass",l.VKq(16,b,r.submitted&&r.f.programType.errors)),l.xp6(3),l.Q6J("ngIf",r.submitted&&r.f.programType.errors),l.xp6(1),l.Q6J("ngIf",r.showDays),l.xp6(1),l.Q6J("ngIf",r.showMonths),l.xp6(7),l.Q6J("ngClass",l.VKq(18,b,r.submitted&&r.f.checkupInterval.errors)),l.xp6(1),l.Q6J("ngIf",r.submitted&&r.f.checkupInterval.errors),l.xp6(6),l.Q6J("ngIf",r.edit))},directives:[m.SP,m.uX,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,n.mk,n.O5,s._,s.CE,n.sg,s.x0],styles:[".form-check[_ngcontent-%COMP%]{padding-left:3.25rem!important}.btn-secondary[_ngcontent-%COMP%]{margin-right:1.2rem}.add_btn[_ngcontent-%COMP%]{color:#599e39}.remove_btn[_ngcontent-%COMP%]{color:#d40929}"]}),r}(),F=((I=function r(){e(this,r)}).\u0275fac=function(e){return new(e||I)},I.\u0275mod=l.oAB({type:I}),I.\u0275inj=l.cJS({imports:[[n.ez,s.u5,s.UX,a.Bz.forChild([{path:"",component:J}])]]}),I)}}])}();