(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[3140],{72620:function(t,e,i){"use strict";i.d(e,{Y:function(){return s}});var r=i(37716),o=i(76458);let s=(()=>{class t{constructor(t){this.snackbar=t}success(t){return this.snackbar.open(t,void 0,{duration:3e3,panelClass:["snackbar-success"]})}error(t){return this.snackbar.open(t,void 0,{duration:3e3,panelClass:["snackbar-error"]})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o.ux))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},33140:function(t,e,i){"use strict";i.r(e),i.d(e,{PatientsProgramModule:function(){return v}});var r=i(38583),o=i(95987),s=i(22238),n=i(3679),l=i(37716),a=i(91841);function c(t,e){1&t&&(l.TgZ(0,"div"),l._uU(1,"Please upload files"),l.qZA())}function m(t,e){if(1&t&&(l.TgZ(0,"div",6),l.YNc(1,c,2,0,"div",7),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.f.file.errors.required&&t.submitted)}}let p=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.data=e,this.http=i,this.uploadForm=new n.cw({file:new n.NI("",n.kI.required),fileSource:new n.NI("",[n.kI.required])}),this.files=[],this.submitted=!1}ngOnInit(){}onFileChange(t){if(t.target.files.length>0)for(var e=0;e<t.target.files.length;e++)this.files.push(t.target.files[e])}submit(){this.submitted=!0;for(var t=new FormData,e=0;e<this.files.length;e++)t.append("files[]",this.files[e]);t.append("patientId",this.data.patientId),t.append("programId",this.data.programId),t.append("visit",this.data.visit),this.dialogRef.close({img_url:"test_image_url"})}get f(){return this.uploadForm.controls}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.so),l.Y36(s.WI),l.Y36(a.eN))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-doc-upload"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","file","calss","fw-100"],["formControlName","file","id","file","type","file","multiple","",1,"form-control",3,"change"],["class","alert alert-danger mx-auto",4,"ngIf"],["type","submit",1,"btn","btn-primary","mt-3"],[1,"alert","alert-danger","mx-auto"],[4,"ngIf"]],template:function(t,e){1&t&&(l.TgZ(0,"form",0),l.NdJ("ngSubmit",function(){return e.submit()}),l.TgZ(1,"div",1),l.TgZ(2,"label",2),l._uU(3,"Please select files to upload"),l.qZA(),l.TgZ(4,"input",3),l.NdJ("change",function(t){return e.onFileChange(t)}),l.qZA(),l.YNc(5,m,2,1,"div",4),l.qZA(),l.TgZ(6,"button",5),l._uU(7,"Submit"),l.qZA(),l.qZA()),2&t&&(l.Q6J("formGroup",e.uploadForm),l.xp6(5),l.Q6J("ngIf",e.f.file.touched&&e.f.file.invalid&&e.submitted))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,r.O5],styles:[""]}),t})();var u=i(11766),d=i(72620),g=i(76627);function f(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",20),l.TgZ(2,"div",21),l.TgZ(3,"h4",22),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"div",23),l._UZ(6,"input",24),l.qZA(),l.TgZ(7,"div",25),l._UZ(8,"input",26),l.TgZ(9,"button",27),l.NdJ("click",function(){const e=l.CHM(t).index,i=l.oxw().index;return l.oxw().removeEmployeeSkill(i,e)}),l.TgZ(10,"span",16),l._uU(11," remove_circle "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.index;l.xp6(1),l.Q6J("formGroupName",t),l.xp6(3),l.hij("Checkup ",t," :")}}function h(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",10),l.TgZ(2,"div",4),l.TgZ(3,"div",11),l.TgZ(4,"h3",12),l._uU(5),l.qZA(),l._UZ(6,"input",13),l.TgZ(7,"mat-icon",14),l.NdJ("click",function(){const e=l.CHM(t).index;return l.oxw().fileUpload(e)}),l._uU(8,"file_upload"),l.qZA(),l.TgZ(9,"button",15),l.NdJ("click",function(){const e=l.CHM(t).index;return l.oxw().removeEmployee(e)}),l.TgZ(10,"span",16),l._uU(11," remove_circle "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",17),l.YNc(13,f,12,2,"div",6),l.qZA(),l.TgZ(14,"button",18),l.NdJ("click",function(){const e=l.CHM(t).index;return l.oxw().addEmployeeSkill(e)}),l._uU(15," Add Checkup "),l.TgZ(16,"span",19),l._uU(17," add_circle "),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.index,i=l.oxw();l.xp6(1),l.Q6J("formGroupName",t),l.xp6(4),l.hij("Visit-",t," :"),l.xp6(8),l.Q6J("ngForOf",i.employeeSkills(t).controls)}}let b=(()=>{class t{constructor(t,e,i,r,o,s,n){this.route=t,this.programService=e,this.cdr=i,this.fb=r,this._location=o,this.toasterService=s,this.matDialog=n,this.programId="",this.patientId=""}get fruitsArray(){return this.fruitsForm.get("fruits")}ngOnInit(){let t="",e="";this.route.paramMap.subscribe(i=>{t=i.get("programId")||"",e=i.get("patientId")||"",this.programId=t,this.patientId=e}),this.empForm=this.fb.group({employees:this.fb.array([])}),this.programService.getProgramDetails(t,e).subscribe(t=>{var e,i;this.programDetails=null==t?void 0:t.programs,this.cdr.detectChanges(),console.log("patient program details",this.programDetails.programId);let r=null===(e=t.programs)||void 0===e?void 0:e.programDetails;console.log("vD",r),r&&(this.fruitsForm=this.fb.group({name:"Joe Bloggs",fruits:this.fb.array([{id:1,name:"Apple",selected:!0},{id:2,name:"Pear",selected:!1},{id:3,name:"Orange",selected:!1}].map(t=>this.fb.group(t)))}));let o=null===(i=this.programDetails)||void 0===i?void 0:i.programDetails;console.log(o),o.forEach((t,e)=>{this.fb.group({visit:t.visit,docs:"",skills:t.skills});let i=this.empForm.get("employees"),r=this.fb.group({visit:t.visit,docs:"",skills:this.fb.array([])});i.push(r),t.skills.forEach((t,i)=>{let r=this.employees().at(e).get("skills"),o=this.fb.group({skill:t.skill,status:t.status});r.push(o)})})})}backClicked(){this._location.back()}newEmployee(){return this.fb.group({visit:"",docs:"",skills:this.fb.array([])})}addEmployee(){this.employees().push(this.newEmployee())}removeEmployee(t){this.employees().removeAt(t)}employeeSkills(t){return this.employees().at(t).get("skills")}newSkill(){return this.fb.group({skill:""})}addEmployeeSkill(t){this.employeeSkills(t).push(this.newSkill())}removeEmployeeSkill(t,e){this.employeeSkills(t).removeAt(e)}employees(){return this.empForm.get("employees")}onSubmit(){console.log("programid",this.programId),console.log("patientid",this.patientId),console.log("visitForm",this.empForm.value);let t=Object.assign({programId:this.programId,patientId:this.patientId},this.empForm.value);console.log("object",t),this.programService.savePatientProgram(t).subscribe(t=>{this.toasterService.success("program details updated successfully")},t=>{this.toasterService.error("Failed to update program details")})}onSubmit2(){console.log("friutsform value",this.fruitsForm.value)}fileUpload(t){var e;let i=null===(e=this.employees().at(t).get("visit"))||void 0===e?void 0:e.value;this.matDialog.open(p,{height:"400px",width:"400px",data:{visit:i,programId:this.programId,patientId:this.patientId}}).afterClosed().subscribe(e=>{var i;console.log("data from modal",e),null===(i=this.employees().at(t).get("docs"))||void 0===i||i.setValue(e.img_url)})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(o.gz),l.Y36(u.M),l.Y36(l.sBO),l.Y36(n.qu),l.Y36(r.Ye),l.Y36(d.Y),l.Y36(s.uw))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-patients-program"]],decls:15,vars:3,consts:[[1,"text-primary","fw-100"],[1,"card-body","border-top","p-9"],[3,"formGroup","ngSubmit"],["formArrayName","employees"],[1,"row"],[1,"col-lg-7"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-success","mt-4",3,"click"],[1,"card-footer","d-flex","justify-content-end","py-6","px-9"],["type","submit",1,"btn","btn-primary"],[3,"formGroupName"],[1,"col-md-12","d-flex","align-items-center"],[1,"mb-0","w-50"],["type","text","formControlName","visit",1,"form-control"],[2,"cursor","pointer",3,"click"],[1,"btn","btn-sm","btn-transparent","ml-2",3,"click"],[1,"material-icons","remove_btn"],["formArrayName","skills"],["type","button",1,"btn","btn-sm","btn-transparent","d-flex","align-items-center",3,"click"],[1,"material-icons","add_btn"],[1,"row","mb-1","mt-3","ml-3","d-flex","align-items-center",3,"formGroupName"],[1,"col-md-3","d-flex","justify-content-md-start"],[1,"mb-0"],[1,"col-md-6"],["type","text","formControlName","skill",1,"form-control"],[1,"col-md-3","d-flex","align-items-center","justify-content-center"],["formControlName","status","type","checkbox","value","","id","flexCheckChecked",1,"form-check-input"],[1,"btn","btn-sm","btn-transparent",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"p",0),l._uU(1),l.qZA(),l.TgZ(2,"h4"),l._uU(3," Patient Program Details"),l.qZA(),l.TgZ(4,"div",1),l.TgZ(5,"form",2),l.NdJ("ngSubmit",function(){return e.onSubmit()}),l.TgZ(6,"div",3),l.TgZ(7,"div",4),l.TgZ(8,"div",5),l.YNc(9,h,18,3,"div",6),l.qZA(),l.qZA(),l.TgZ(10,"button",7),l.NdJ("click",function(){return e.addEmployee()}),l._uU(11,"Add Visit"),l.qZA(),l.qZA(),l.TgZ(12,"div",8),l.TgZ(13,"button",9),l._uU(14,"Save"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.hij("Program Name:",null==e.programDetails?null:e.programDetails.programId,""),l.xp6(4),l.Q6J("formGroup",e.empForm),l.xp6(4),l.Q6J("ngForOf",e.employees().controls))},directives:[n._Y,n.JL,n.sg,n.CE,r.sg,n.x0,n.Fj,n.JJ,n.u,g.Hw,n.Wl],styles:[".form-check[_ngcontent-%COMP%]{padding-left:3.25rem!important}.btn-secondary[_ngcontent-%COMP%]{margin-right:1.2rem}.add_btn[_ngcontent-%COMP%]{color:#599e39}.remove_btn[_ngcontent-%COMP%]{color:#d40929}"]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.ez,o.Bz.forChild([{path:"",component:b}])]]}),t})()}}]);