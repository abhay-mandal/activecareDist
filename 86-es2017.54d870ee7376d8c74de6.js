(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[86],{72620:function(e,t,r){"use strict";r.d(t,{Y:function(){return s}});var o=r(37716),i=r(76458);let s=(()=>{class e{constructor(e){this.snackbar=e}success(e){return this.snackbar.open(e,void 0,{duration:3e3,panelClass:["snackbar-success"]})}error(e){return this.snackbar.open(e,void 0,{duration:3e3,panelClass:["snackbar-error"]})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(i.ux))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},90086:function(e,t,r){"use strict";r.r(t),r.d(t,{ProgramFormModule:function(){return _}});var o=r(38583),i=r(95987),s=r(3679),n=r(37716),a=r(11766),l=r(72620),d=r(87060),c=r(65939);function m(e,t){1&e&&(n.TgZ(0,"div"),n._uU(1,"Required"),n.qZA())}function u(e,t){if(1&e&&(n.TgZ(0,"div",25),n.YNc(1,m,2,0,"div",26),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.f.programName.errors.required)}}function g(e,t){1&e&&(n.TgZ(0,"div"),n._uU(1,"Required"),n.qZA())}function p(e,t){if(1&e&&(n.TgZ(0,"div",25),n.YNc(1,g,2,0,"div",26),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.f.programType.errors.required)}}function f(e,t){1&e&&(n.TgZ(0,"div"),n._uU(1,"Required"),n.qZA())}function h(e,t){if(1&e&&(n.TgZ(0,"div",25),n.YNc(1,f,2,0,"div",26),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.f.days.errors.required)}}const Z=function(e){return{"is-invalid":e}};function v(e,t){if(1&e&&(n.TgZ(0,"div",6),n.TgZ(1,"label",7),n._uU(2,"Total no.of days"),n.qZA(),n.TgZ(3,"div",8),n.TgZ(4,"div",9),n.TgZ(5,"div",10),n._UZ(6,"input",27),n.YNc(7,h,2,1,"div",12),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngClass",n.VKq(2,Z,e.submitted&&e.f.days.errors)),n.xp6(1),n.Q6J("ngIf",e.submitted&&e.f.days.errors)}}function b(e,t){1&e&&(n.TgZ(0,"div"),n._uU(1,"Required"),n.qZA())}function q(e,t){if(1&e&&(n.TgZ(0,"div",25),n.YNc(1,b,2,0,"div",26),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.f.months.errors.required)}}function y(e,t){if(1&e&&(n.TgZ(0,"div",6),n.TgZ(1,"label",7),n._uU(2,"Total no.of months"),n.qZA(),n.TgZ(3,"div",8),n.TgZ(4,"div",9),n.TgZ(5,"div",10),n._UZ(6,"input",28),n.YNc(7,q,2,1,"div",12),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngClass",n.VKq(2,Z,e.submitted&&e.f.months.errors)),n.xp6(1),n.Q6J("ngIf",e.submitted&&e.f.months.errors)}}function T(e,t){1&e&&(n.TgZ(0,"div"),n._uU(1,"Required"),n.qZA())}function A(e,t){if(1&e&&(n.TgZ(0,"div",25),n.YNc(1,T,2,0,"div",26),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.f.checkupInterval.errors.required)}}function x(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"div",45),n.TgZ(2,"div",46),n.TgZ(3,"h4",47),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"div",48),n._UZ(6,"input",49),n.qZA(),n.TgZ(7,"div",50),n.TgZ(8,"button",51),n.NdJ("click",function(){const t=n.CHM(e).index,r=n.oxw().index;return n.oxw(2).removeEmployeeSkill(r,t)}),n.TgZ(9,"span",41),n._uU(10," remove_circle "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.index;n.xp6(1),n.Q6J("formGroupName",e),n.xp6(3),n.hij("Checkup ",e+1," :")}}function k(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"div",36),n.TgZ(2,"div",9),n.TgZ(3,"div",37),n.TgZ(4,"h3",38),n._uU(5),n.qZA(),n._UZ(6,"input",39),n.TgZ(7,"button",40),n.NdJ("click",function(){const t=n.CHM(e).index;return n.oxw(2).removeEmployee(t)}),n.TgZ(8,"span",41),n._uU(9," remove_circle "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",42),n.YNc(11,x,11,2,"div",33),n.qZA(),n.TgZ(12,"button",43),n.NdJ("click",function(){const t=n.CHM(e).index;return n.oxw(2).addEmployeeSkill(t)}),n._uU(13," Add Checkup "),n.TgZ(14,"span",44),n._uU(15," add_circle "),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.index,r=n.oxw(2);n.xp6(1),n.Q6J("formGroupName",e),n.xp6(4),n.hij("Visit-",e+1," :"),n.xp6(6),n.Q6J("ngForOf",r.employeeSkills(e).controls)}}function N(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.TgZ(1,"button",22),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).backClicked()}),n._uU(2,"Back"),n.qZA(),n.TgZ(3,"button",23),n._uU(4,"Save"),n.qZA(),n.qZA()}}function w(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"mat-tab",29),n.TgZ(1,"div",1),n.TgZ(2,"form",30),n.NdJ("ngSubmit",function(){return n.CHM(e),n.oxw().onSubmit2()}),n.TgZ(3,"div",31),n.TgZ(4,"div",9),n.TgZ(5,"div",32),n.YNc(6,k,16,3,"div",33),n.qZA(),n.qZA(),n.TgZ(7,"button",34),n.NdJ("click",function(){return n.CHM(e),n.oxw().addEmployee()}),n._uU(8,"Add Visit"),n.qZA(),n.qZA(),n.YNc(9,N,5,0,"div",35),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("formGroup",e.empForm),n.xp6(4),n.Q6J("ngForOf",e.employees().controls),n.xp6(3),n.Q6J("ngIf",e.edit)}}let C=(()=>{class e{constructor(e,t,r,o,i,n){this._location=e,this.fb=t,this.programService=r,this.toasterService=o,this.router=i,this.dataservice=n,this.programForm=new s.cw({programName:new s.NI("",s.kI.required),programType:new s.NI("",s.kI.required),days:new s.NI(""),months:new s.NI(""),checkupInterval:new s.NI("",s.kI.required),createdBy:new s.NI("")}),this.submitted=!1,this.showDays=!0,this.showMonths=!0,this.edit=!1,this.selectedTab=0}ngOnInit(){this.edit=this.router.url.indexOf("/edit/program-form")>-1,this.empForm=this.fb.group({employees:this.fb.array([])}),this.edit&&this.editPatchValue()}editPatchValue(){let e=this.dataservice.getEdittingUser();this.edittingObject=e,this.programForm.patchValue(e);let t=null==e?void 0:e.visitDetails;t&&t.forEach((e,t)=>{this.fb.group({visit:e.visit,skills:e.skills});let r=this.empForm.get("employees"),o=this.fb.group({visit:e.visit,skills:this.fb.array([])});r.push(o),e.skills.forEach((e,r)=>{let o=this.employees().at(t).get("skills"),i=this.fb.group({skill:e.skill,status:!1});o.push(i)})})}backClicked(){this._location.back()}employees(){return this.empForm.get("employees")}newEmployee(){return this.fb.group({visit:"",skills:this.fb.array([])})}addEmployee(){this.employees().push(this.newEmployee())}removeEmployee(e){this.employees().removeAt(e)}employeeSkills(e){return this.employees().at(e).get("skills")}newSkill(){return this.fb.group({skill:"",status:!1})}addEmployeeSkill(e){this.employeeSkills(e).push(this.newSkill())}removeEmployeeSkill(e,t){this.employeeSkills(e).removeAt(t)}onProgramTypeChange(){var e,t,r,o,i,n,a,l,d,c=null===(e=this.programForm.get("programType"))||void 0===e?void 0:e.value;"days"==c&&(this.showDays=!0,this.showMonths=!1,null===(t=this.programForm.get("days"))||void 0===t||t.setValidators([s.kI.required]),null===(r=this.programForm.get("days"))||void 0===r||r.updateValueAndValidity(),null===(o=this.programForm.get("months"))||void 0===o||o.clearValidators(),null===(i=this.programForm.get("months"))||void 0===i||i.updateValueAndValidity()),"months"==c&&(this.showMonths=!0,this.showDays=!1,null===(n=this.programForm.get("days"))||void 0===n||n.clearValidators(),null===(a=this.programForm.get("days"))||void 0===a||a.updateValueAndValidity(),null===(l=this.programForm.get("months"))||void 0===l||l.setValidators([s.kI.required]),null===(d=this.programForm.get("months"))||void 0===d||d.updateValueAndValidity())}onSubmit(){var e;if(this.submitted=!0,!this.programForm.valid)return!1;if(this.programForm.valid){if(!this.edit){var t=JSON.parse(localStorage.getItem("userObj")||"");null===(e=this.programForm.get("createdBy"))||void 0===e||e.setValue(t._id),this.programService.createProgram(this.programForm.value).subscribe(e=>{this.submitted=!1,this.programForm.reset(),this.edit=!0,this.edittingObject=e.object,this.dataservice.setEdittingUser(e.object),this.programForm.patchValue(e.object),this.editPatchValue(),this.selectedTab=1,this.toasterService.success("Program created successfully")},e=>{this.toasterService.error("Failed to create program!try again later")})}this.edit&&this.programService.updateProgram(this.programForm.value,this.edittingObject._id).subscribe(e=>{this.submitted=!1,this.programForm.reset(),this.router.navigateByUrl("/create-program"),this.toasterService.success("Program updated successfully")},e=>{this.toasterService.error("Failed to create program!try again later")}),window.location.href="/dashboard"}}onSubmit2(){this.programService.addvisitDetails(this.empForm.value,this.edittingObject._id).subscribe(e=>{this.toasterService.success("details updated successfully"),this.router.navigateByUrl("/create-program")},e=>{this.toasterService.error("Failed to update")})}get f(){return this.programForm.controls}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(o.Ye),n.Y36(s.qu),n.Y36(a.M),n.Y36(l.Y),n.Y36(i.F0),n.Y36(d.z))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-program-form"]],decls:43,vars:20,consts:[[1,"card","rounded"],[1,"card-body","border-top","px-5","py-1"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],["label","Program"],[1,"form",3,"formGroup","ngSubmit"],[1,"card-body","border-top","p-4"],[1,"row","mb-3"],[1,"col-lg-4","col-form-label","required","fw-bold","fs-6"],[1,"col-lg-8"],[1,"row"],[1,"col-lg-6","fv-row"],["type","text","placeholder","Program name","formControlName","programName",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"col-lg-8","fv-row","d-flex","align-items-center"],[1,"form-check"],["type","radio","formControlName","programType","id","exampleRadios1","value","days",1,"form-check-input",3,"ngClass","change"],["for","exampleRadios1",1,"form-check-label"],["type","radio","formControlName","programType","id","exampleRadios2","value","months",1,"form-check-input",3,"ngClass","change"],["for","exampleRadios2",1,"form-check-label"],["class","row mb-3",4,"ngIf"],["type","text","placeholder","Interval","formControlName","checkupInterval",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[1,"d-flex","justify-content-end","pb-5","px-9"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success"],["label","Details",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],["type","text","placeholder","Days","formControlName","days",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["type","text","placeholder","Months","formControlName","months",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["label","Details"],[3,"formGroup","ngSubmit"],["formArrayName","employees"],[1,"col-7"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-success","my-3",3,"click"],["class","d-flex justify-content-end pb-5 px-9",4,"ngIf"],[3,"formGroupName"],[1,"col-md-12","d-flex","align-items-center"],[1,"mb-0","w-50"],["type","text","formControlName","visit",1,"form-control"],[1,"btn","btn-sm","btn-transparent","ml-2",3,"click"],[1,"material-icons","remove_btn"],["formArrayName","skills"],["type","button",1,"btn","btn-sm","btn-transparent","d-flex","align-items-center",3,"click"],[1,"material-icons","add_btn"],[1,"row","mb-1","mt-3","ml-3","d-flex","align-items-center",3,"formGroupName"],[1,"col-md-4","d-flex","justify-content-md-end"],[1,"mb-0"],[1,"col-md-6"],["type","text","formControlName","skill",1,"form-control"],[1,"col-md-2"],[1,"btn","btn-sm","btn-transparent",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"mat-tab-group",2),n.NdJ("selectedIndexChange",function(e){return t.selectedTab=e}),n.TgZ(3,"mat-tab",3),n.TgZ(4,"form",4),n.NdJ("ngSubmit",function(){return t.onSubmit()}),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n.TgZ(7,"label",7),n._uU(8,"Program Name"),n.qZA(),n.TgZ(9,"div",8),n.TgZ(10,"div",9),n.TgZ(11,"div",10),n._UZ(12,"input",11),n.YNc(13,u,2,1,"div",12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"div",6),n.TgZ(15,"label",7),n._uU(16,"Type"),n.qZA(),n.TgZ(17,"div",13),n.TgZ(18,"div",14),n.TgZ(19,"input",15),n.NdJ("change",function(){return t.onProgramTypeChange()}),n.qZA(),n.TgZ(20,"label",16),n._uU(21," Day "),n.qZA(),n.qZA(),n.TgZ(22,"div",14),n.TgZ(23,"input",17),n.NdJ("change",function(){return t.onProgramTypeChange()}),n.qZA(),n.TgZ(24,"label",18),n._uU(25," Month "),n.qZA(),n.YNc(26,p,2,1,"div",12),n.qZA(),n.qZA(),n.qZA(),n.YNc(27,v,8,4,"div",19),n.YNc(28,y,8,4,"div",19),n.TgZ(29,"div",6),n.TgZ(30,"label",7),n._uU(31,"Checkup interval"),n.qZA(),n.TgZ(32,"div",8),n.TgZ(33,"div",9),n.TgZ(34,"div",10),n._UZ(35,"input",20),n.YNc(36,A,2,1,"div",12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(37,"div",21),n.TgZ(38,"button",22),n.NdJ("click",function(){return t.backClicked()}),n._uU(39,"Back"),n.qZA(),n.TgZ(40,"button",23),n._uU(41,"Save"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(42,w,10,3,"mat-tab",24),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("selectedIndex",t.selectedTab),n.xp6(2),n.Q6J("formGroup",t.programForm),n.xp6(8),n.Q6J("ngClass",n.VKq(12,Z,t.submitted&&t.f.programName.errors)),n.xp6(1),n.Q6J("ngIf",t.submitted&&t.f.programName.errors),n.xp6(6),n.Q6J("ngClass",n.VKq(14,Z,t.submitted&&t.f.programType.errors)),n.xp6(4),n.Q6J("ngClass",n.VKq(16,Z,t.submitted&&t.f.programType.errors)),n.xp6(3),n.Q6J("ngIf",t.submitted&&t.f.programType.errors),n.xp6(1),n.Q6J("ngIf",t.showDays),n.xp6(1),n.Q6J("ngIf",t.showMonths),n.xp6(7),n.Q6J("ngClass",n.VKq(18,Z,t.submitted&&t.f.checkupInterval.errors)),n.xp6(1),n.Q6J("ngIf",t.submitted&&t.f.checkupInterval.errors),n.xp6(6),n.Q6J("ngIf",t.edit))},directives:[c.SP,c.uX,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,o.mk,o.O5,s._,s.CE,o.sg,s.x0],styles:[".form-check[_ngcontent-%COMP%]{padding-left:3.25rem!important}.btn-secondary[_ngcontent-%COMP%]{margin-right:1.2rem}.add_btn[_ngcontent-%COMP%]{color:#599e39}.remove_btn[_ngcontent-%COMP%]{color:#d40929}"]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[o.ez,s.u5,s.UX,i.Bz.forChild([{path:"",component:C}])]]}),e})()}}]);