!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[3140],{72620:function(t,r,o){"use strict";o.d(r,{Y:function(){return s}});var n=o(37716),a=o(76458),s=function(){var t=function(){function t(i){e(this,t),this.snackbar=i}return i(t,[{key:"success",value:function(e){return this.snackbar.open(e,void 0,{duration:3e3,panelClass:["snackbar-success"]})}},{key:"error",value:function(e){return this.snackbar.open(e,void 0,{duration:3e3,panelClass:["snackbar-error"]})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(n.LFG(a.ux))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},33140:function(t,r,o){"use strict";o.r(r),o.d(r,{PatientsProgramModule:function(){return Z}});var n=o(38583),a=o(95987),s=o(22238),l=o(3679),u=o(37716),c=o(91841);function m(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Please upload files"),u.qZA())}function p(e,t){if(1&e&&(u.TgZ(0,"div",6),u.YNc(1,m,2,0,"div",7),u.qZA()),2&e){var i=u.oxw();u.xp6(1),u.Q6J("ngIf",i.f.file.errors.required&&i.submitted)}}var d=function(){var t=function(){function t(i,r,o){e(this,t),this.dialogRef=i,this.data=r,this.http=o,this.uploadForm=new l.cw({file:new l.NI("",l.kI.required),fileSource:new l.NI("",[l.kI.required])}),this.files=[],this.submitted=!1}return i(t,[{key:"ngOnInit",value:function(){}},{key:"onFileChange",value:function(e){if(e.target.files.length>0)for(var t=0;t<e.target.files.length;t++)this.files.push(e.target.files[t])}},{key:"submit",value:function(){this.submitted=!0;for(var e=new FormData,t=0;t<this.files.length;t++)e.append("files[]",this.files[t]);e.append("patientId",this.data.patientId),e.append("programId",this.data.programId),e.append("visit",this.data.visit),this.dialogRef.close({img_url:"test_image_url"})}},{key:"f",get:function(){return this.uploadForm.controls}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(s.so),u.Y36(s.WI),u.Y36(c.eN))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-doc-upload"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","file","calss","fw-100"],["formControlName","file","id","file","type","file","multiple","",1,"form-control",3,"change"],["class","alert alert-danger mx-auto",4,"ngIf"],["type","submit",1,"btn","btn-primary","mt-3"],[1,"alert","alert-danger","mx-auto"],[4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return t.submit()}),u.TgZ(1,"div",1),u.TgZ(2,"label",2),u._uU(3,"Please select files to upload"),u.qZA(),u.TgZ(4,"input",3),u.NdJ("change",function(e){return t.onFileChange(e)}),u.qZA(),u.YNc(5,p,2,1,"div",4),u.qZA(),u.TgZ(6,"button",5),u._uU(7,"Submit"),u.qZA(),u.qZA()),2&e&&(u.Q6J("formGroup",t.uploadForm),u.xp6(5),u.Q6J("ngIf",t.f.file.touched&&t.f.file.invalid&&t.submitted))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,n.O5],styles:[""]}),t}(),f=o(11766),g=o(72620),v=o(76627);function h(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",20),u.TgZ(2,"div",21),u.TgZ(3,"h4",22),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"div",23),u._UZ(6,"input",24),u.qZA(),u.TgZ(7,"div",25),u._UZ(8,"input",26),u.TgZ(9,"button",27),u.NdJ("click",function(){var e=u.CHM(i).index,t=u.oxw().index;return u.oxw().removeEmployeeSkill(t,e)}),u.TgZ(10,"span",16),u._uU(11," remove_circle "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.index;u.xp6(1),u.Q6J("formGroupName",r),u.xp6(3),u.hij("Checkup ",r," :")}}function b(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",10),u.TgZ(2,"div",4),u.TgZ(3,"div",11),u.TgZ(4,"h3",12),u._uU(5),u.qZA(),u._UZ(6,"input",13),u.TgZ(7,"mat-icon",14),u.NdJ("click",function(){var e=u.CHM(i).index;return u.oxw().fileUpload(e)}),u._uU(8,"file_upload"),u.qZA(),u.TgZ(9,"button",15),u.NdJ("click",function(){var e=u.CHM(i).index;return u.oxw().removeEmployee(e)}),u.TgZ(10,"span",16),u._uU(11," remove_circle "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",17),u.YNc(13,h,12,2,"div",6),u.qZA(),u.TgZ(14,"button",18),u.NdJ("click",function(){var e=u.CHM(i).index;return u.oxw().addEmployeeSkill(e)}),u._uU(15," Add Checkup "),u.TgZ(16,"span",19),u._uU(17," add_circle "),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var r=t.index,o=u.oxw();u.xp6(1),u.Q6J("formGroupName",r),u.xp6(4),u.hij("Visit-",r," :"),u.xp6(8),u.Q6J("ngForOf",o.employeeSkills(r).controls)}}var y,k=function(){var t=function(){function t(i,r,o,n,a,s,l){e(this,t),this.route=i,this.programService=r,this.cdr=o,this.fb=n,this._location=a,this.toasterService=s,this.matDialog=l,this.programId="",this.patientId=""}return i(t,[{key:"fruitsArray",get:function(){return this.fruitsForm.get("fruits")}},{key:"ngOnInit",value:function(){var e=this,t="",i="";this.route.paramMap.subscribe(function(r){t=r.get("programId")||"",i=r.get("patientId")||"",e.programId=t,e.patientId=i}),this.empForm=this.fb.group({employees:this.fb.array([])}),this.programService.getProgramDetails(t,i).subscribe(function(t){var i,r;e.programDetails=null==t?void 0:t.programs,e.cdr.detectChanges(),console.log("patient program details",e.programDetails.programId);var o=null===(i=t.programs)||void 0===i?void 0:i.programDetails;console.log("vD",o),o&&(e.fruitsForm=e.fb.group({name:"Joe Bloggs",fruits:e.fb.array([{id:1,name:"Apple",selected:!0},{id:2,name:"Pear",selected:!1},{id:3,name:"Orange",selected:!1}].map(function(t){return e.fb.group(t)}))}));var n=null===(r=e.programDetails)||void 0===r?void 0:r.programDetails;console.log(n),n.forEach(function(t,i){e.fb.group({visit:t.visit,docs:"",skills:t.skills});var r=e.empForm.get("employees"),o=e.fb.group({visit:t.visit,docs:"",skills:e.fb.array([])});r.push(o),t.skills.forEach(function(t,r){var o=e.employees().at(i).get("skills"),n=e.fb.group({skill:t.skill,status:t.status});o.push(n)})})})}},{key:"backClicked",value:function(){this._location.back()}},{key:"newEmployee",value:function(){return this.fb.group({visit:"",docs:"",skills:this.fb.array([])})}},{key:"addEmployee",value:function(){this.employees().push(this.newEmployee())}},{key:"removeEmployee",value:function(e){this.employees().removeAt(e)}},{key:"employeeSkills",value:function(e){return this.employees().at(e).get("skills")}},{key:"newSkill",value:function(){return this.fb.group({skill:""})}},{key:"addEmployeeSkill",value:function(e){this.employeeSkills(e).push(this.newSkill())}},{key:"removeEmployeeSkill",value:function(e,t){this.employeeSkills(e).removeAt(t)}},{key:"employees",value:function(){return this.empForm.get("employees")}},{key:"onSubmit",value:function(){var e=this;console.log("programid",this.programId),console.log("patientid",this.patientId),console.log("visitForm",this.empForm.value);var t=Object.assign({programId:this.programId,patientId:this.patientId},this.empForm.value);console.log("object",t),this.programService.savePatientProgram(t).subscribe(function(t){e.toasterService.success("program details updated successfully")},function(t){e.toasterService.error("Failed to update program details")})}},{key:"onSubmit2",value:function(){console.log("friutsform value",this.fruitsForm.value)}},{key:"fileUpload",value:function(e){var t,i=this,r=null===(t=this.employees().at(e).get("visit"))||void 0===t?void 0:t.value;this.matDialog.open(d,{height:"400px",width:"400px",data:{visit:r,programId:this.programId,patientId:this.patientId}}).afterClosed().subscribe(function(t){var r;console.log("data from modal",t),null===(r=i.employees().at(e).get("docs"))||void 0===r||r.setValue(t.img_url)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(a.gz),u.Y36(f.M),u.Y36(u.sBO),u.Y36(l.qu),u.Y36(n.Ye),u.Y36(g.Y),u.Y36(s.uw))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-patients-program"]],decls:15,vars:3,consts:[[1,"text-primary","fw-100"],[1,"card-body","border-top","p-9"],[3,"formGroup","ngSubmit"],["formArrayName","employees"],[1,"row"],[1,"col-lg-7"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-success","mt-4",3,"click"],[1,"card-footer","d-flex","justify-content-end","py-6","px-9"],["type","submit",1,"btn","btn-primary"],[3,"formGroupName"],[1,"col-md-12","d-flex","align-items-center"],[1,"mb-0","w-50"],["type","text","formControlName","visit",1,"form-control"],[2,"cursor","pointer",3,"click"],[1,"btn","btn-sm","btn-transparent","ml-2",3,"click"],[1,"material-icons","remove_btn"],["formArrayName","skills"],["type","button",1,"btn","btn-sm","btn-transparent","d-flex","align-items-center",3,"click"],[1,"material-icons","add_btn"],[1,"row","mb-1","mt-3","ml-3","d-flex","align-items-center",3,"formGroupName"],[1,"col-md-3","d-flex","justify-content-md-start"],[1,"mb-0"],[1,"col-md-6"],["type","text","formControlName","skill",1,"form-control"],[1,"col-md-3","d-flex","align-items-center","justify-content-center"],["formControlName","status","type","checkbox","value","","id","flexCheckChecked",1,"form-check-input"],[1,"btn","btn-sm","btn-transparent",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"p",0),u._uU(1),u.qZA(),u.TgZ(2,"h4"),u._uU(3," Patient Program Details"),u.qZA(),u.TgZ(4,"div",1),u.TgZ(5,"form",2),u.NdJ("ngSubmit",function(){return t.onSubmit()}),u.TgZ(6,"div",3),u.TgZ(7,"div",4),u.TgZ(8,"div",5),u.YNc(9,b,18,3,"div",6),u.qZA(),u.qZA(),u.TgZ(10,"button",7),u.NdJ("click",function(){return t.addEmployee()}),u._uU(11,"Add Visit"),u.qZA(),u.qZA(),u.TgZ(12,"div",8),u.TgZ(13,"button",9),u._uU(14,"Save"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(1),u.hij("Program Name:",null==t.programDetails?null:t.programDetails.programId,""),u.xp6(4),u.Q6J("formGroup",t.empForm),u.xp6(4),u.Q6J("ngForOf",t.employees().controls))},directives:[l._Y,l.JL,l.sg,l.CE,n.sg,l.x0,l.Fj,l.JJ,l.u,v.Hw,l.Wl],styles:[".form-check[_ngcontent-%COMP%]{padding-left:3.25rem!important}.btn-secondary[_ngcontent-%COMP%]{margin-right:1.2rem}.add_btn[_ngcontent-%COMP%]{color:#599e39}.remove_btn[_ngcontent-%COMP%]{color:#d40929}"]}),t}(),Z=((y=function t(){e(this,t)}).\u0275fac=function(e){return new(e||y)},y.\u0275mod=u.oAB({type:y}),y.\u0275inj=u.cJS({imports:[[n.ez,a.Bz.forChild([{path:"",component:k}])]]}),y)}}])}();